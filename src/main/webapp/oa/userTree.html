<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="pragram" content="no-cache"> 
<meta http-equiv="cache-control" content="no-cache, must-revalidate"> 
<meta http-equiv="expires" content="0"> 
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>中介宝房源软件系统</title>
<meta name="description" content="中介宝房源软件系统">
<meta name="keywords" content="房源软件,房源系统,中介宝">
<link href="/style/css.css" rel="stylesheet">
<link href="/bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="/style/style.css" rel="stylesheet">
<link href="/js/zTree_v3/css/zTreeStyle/zTreeStyle.css" rel="stylesheet">
<script src="/js/jquery.js" type="text/javascript"></script>
<script src="/bootstrap/js/bootstrap.js" type="text/javascript"></script>
<script src="/js/dialog/jquery.artDialog.source.js?skin=win8s" type="text/javascript"></script>
<script src="/js/dialog/plugins/iframeTools.source.js" type="text/javascript"></script>
<script src="/js/jquery.j.tool.js" type="text/javascript"></script>
<script type="text/javascript" src="/js/buildHtml.js"></script>
<script type="text/javascript" src="/js/zTree_v3/js/jquery.ztree.all-3.5.js"></script>
<script type="text/javascript">

function getSider(){
    $.get('/v/oa/uc_side_company.html', function(data) {
        var sideTop=parseInt(getSideH())*-1+6;
        $('#sideCont').html(data).find('.sideHead').css({top:sideTop});
        var sideHeadHeight=$('#sideCont').find('.sideHead').innerHeight()+1;
        $('#sideCont').css({'padding-top':sideHeadHeight})

    });
}


$(document).ready(function() {
  // 加载侧边
    // getSider();
});

</script>

</head>
<body>
<div class="html list title addSide">
    <div class="bodyer mainCont">
      <div class="sideCont" id="sideCont">
        <style type="text/css">
  div#rMenu {position:absolute; top:0;width:150px; text-align: left;padding: 2px;}
  div#rMenu ul li{
    margin: 5px 0;
    padding: 0 15px;
    cursor: pointer;
    list-style: none outside none;
  }
  ul.jtree li a{
    position: initial;
  }
</style>
<script type="text/javascript">
var setting = {
  view: {
    showIcon: false,
    addDiyDom: addDiyDom,
    showLine:false,
    dblClickExpand: false,
  },
  check:{
    enable:true
  },
  data: {
    simpleData: {
      enable: true
    }
  },
  callback: {
    // onRightClick: OnRightClick
    // onClick: onClick
  }
};

YW.ajax({
  type: 'POST',
  url: '/c/dept/getUserTree',
  data:'',
  mysuccess: function(data){
      var result=JSON.parse(data);
      $.fn.zTree.init($("#treeDemo"), setting, result.result);
  }
});

function onClick(event, treeId, treeNode, clickFlag) {
  node = treeNode;
  if(clickFlag!=null){
    var treeObj = $.fn.zTree.getZTreeObj(treeId);
    treeObj.expandNode(treeNode);
  }
  
  $('#cid').val("");
  $('#did').val("");
  if(treeNode.type=="comp"){
    $('#cid').val(treeNode.id);
  }else if(treeNode.type=="dept"){
    $('#did').val(treeNode.id);
  }else{
    return;
  }
} 


function OnRightClick(event, treeId, treeNode) {
  var treeObj = $.fn.zTree.getZTreeObj(treeId);
  treeObj.selectNode(treeNode);
  onClick(event, treeId, treeNode,null);
  if(event.target.tagName!='SPAN'){
    return;
  }
  var Y = event.clientY;
}

function addDiyDom(treeId, treeNode) {
  console.log(treeId);
  var aObj = $("#" + treeNode.tId + "_a");
  aObj.css('display','inline');

  aObj.parent().addClass('a_'+treeNode.type);
  if(treeNode.cnum!=null){
    var cnumStr = '<span class="">'+ treeNode.cnum +' </span>';
    aObj.prepend(cnumStr);  
  }
  // var color="icon_sh";
  // if(treeNode.sh==0 || treeNode.sh==undefined){
  //   color="icon_wsh";
  // }
  // if(treeNode.type!="group"){
  //   var lockStr = '<span id="'+treeNode.tId+'_sh_a" onClick="shenhe(\''+treeNode.tId+'\')" class="icon iconfont '+color+'">&#xe64e;</span>';
  //   aObj.after(lockStr);
  // }
  // aObj.append('<span class="icon iconfont btns runMenu" data-type="runMenu" data-tree="'+treeNode.tId+'">&#xe641;</span>');
}

</script>

<table class="table table-nopadding side_table" width="100%">
  <tbody>
    <tr class="list">
      <td>
        <div class="zTreeDemoBackground left">
          <ul id="treeDemo" class="ztree jtree"></ul>
        </div>
      </td>
    </tr>
  </tbody>
</table>



      </div>
    </div>
</div>

</body>
</html>